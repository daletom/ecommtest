"use strict";

var _require = require('humps'),
    camelize = _require.camelize;

module.exports = function (_ref) {
  var parentItemType = _ref.parentItemType,
      field = _ref.field,
      schema = _ref.schema,
      gqlItemTypeName = _ref.gqlItemTypeName,
      entitiesRepo = _ref.entitiesRepo;
  var fieldKey = camelize(field.apiKey);
  return {
    fieldType: 'String',
    nodeFieldType: {
      type: 'DatoCmsTextNode',
      resolve: function resolve(parent, args, context) {
        var id = 'locale' in parent && 'value___NODE' in parent ? parent.value___NODE : parent["".concat(fieldKey, "Node___NODE")];

        if (id) {
          return context.nodeModel.getNodeById({
            id: id
          });
        }
      }
    }
  };
};